<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Meta tags for character set and viewport -->
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>AirQoMaps</title>

        <!-- External CSS stylesheet (Bootstrap) -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous" />
        <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
    </head>

    <body>
        <div id="map-container">
            <svg id="map" width="100%" height="100%"></svg>
        </div>

        <!-- Add a new div for the legend outside the map-container -->
        <div id="legend" class="legend-container">
            <div class="legend-title">PM2.5 AQI</div>
            <div class="legend-item" data-bs-toggle="tooltip" data-bs-placement="top" title="Good">
                <div class="legend-color" style="background-color: green;">
                    <span class="legend-value">0 - 12</span>
                </div>
            </div>
            <div class="legend-item" data-bs-toggle="tooltip" data-bs-placement="top" title="Moderate">
                <div class="legend-color" style="background-color: yellow;">
                    <span class="legend-value">12.1 - 35.4</span>
                </div>
            </div>
            <div class="legend-item" data-bs-toggle="tooltip" data-bs-placement="top" title="Unhealthy for sensitive people">
                <div class="legend-color" style="background-color: orange;">
                    <span class="legend-value">35.5 - 55.4</span>
                </div>
            </div>
            <div class="legend-item" data-bs-toggle="tooltip" data-bs-placement="top" title="Unhealthy">
                <div class="legend-color" style="background-color: red;">
                    <span class="legend-value">55.5 - 150.4</span>
                </div>
            </div>
            <div class="legend-item" data-bs-toggle="tooltip" data-bs-placement="top" title="Very unhealthy">
                <div class="legend-color" style="background-color: purple;">
                    <span class="legend-value">150.5 - 250.4</span>
                </div>
            </div>
            <div class="legend-item" data-bs-toggle="tooltip" data-bs-placement="top" title="Harzardous">
                <div class="legend-color" style="background-color: maroon;">
                    <span class="legend-value">250.5 - 500</span>
                </div>
            </div>
        </div>

        <!-- JavaScript libraries for map and tooltip interactions -->
        <script src="https://d3js.org/d3.v4.js"></script>
        <script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-I78TRa5emw+9bCmioMBj6Y6AW2Rkxk0G0OCmCrxV0Z3EPk/SRfyu2yv2SkcR06Fy" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>

        <!-- Leaflet library -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
        <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
        <script src="{{ url_for('static', filename='js/frontend_logic.js') }}"></script>
    </body>
</html>
